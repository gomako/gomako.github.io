<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>goMako on GitHub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <link rel="stylesheet" href="css/style.css">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>

    <script src="js/libs/raphael.js"></script>
    <script src="js/libs/underscore-min.js"></script>

  </head>

  <body>

    <div class="wrapper">
      <div id="content">
        <header class="cf">
          <h1 id="strap" class="db1">gomako.github.io</h1>
        </header>

        <section class="cf">          
          <h2 id="title" class="db2-db4">goMako GitHub Page</h2>
          <p class="db2-db4">Hey, I'm new here, so don't start, ok?</p>
          <p class="db2"></p>
          <p class="da3-da6">This is where I learn to use a versioning system that isn't Dropbox, which has worked pretty well for me so far, but the teams I have been part of are pretty small!</p>
          <p class="da3-da6">The sites and apps that I make now I want to look good and give the user the best experience possible in the site they are using.</p>
          <p class="da3-da6">This site was very very heavily influenced by the guys at Gridset, I am really getting into grid systems right now and have them to thank for starting me off!</p>
        </section>

        <footer id="footer" class="db2">
            <a href="https://github.com/gomako">GitHub</a> | <a href="https://twitter.com/gomako">Twitter</a>
        </footer>          
      </div>
    </div>
    <div id="paper"></div>      


    <script>      
    function getPos(el)
    {
        // yay readability
        for (var lx=0, ly=0;
             el != null;
             lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
        return {x: lx,y: ly};
    }

    var rad = (Math.random()*100)+10;

    function moveCircles()
    {

      // Set vars
      var width = innerWidth;
      var height = innerHeight;
      var linecol = "#999";
      // Creates canvas
      var paper = Raphael(document.getElementById('paper'), width, height);

      offsets = document.getElementById('title').getBoundingClientRect();
      footer = document.getElementById('footer').getBoundingClientRect();      
      strap = document.getElementById('strap').getBoundingClientRect();      

      var circle = paper.circle( offsets.left, offsets.bottom, rad );
      circle.attr("fill", "#ccc");
      circle.attr("opacity",0.333);
      circle.attr("stroke", "#ccc");

      var line = paper.path("M"+offsets.left+" "+offsets.bottom+"L"+offsets.right+" "+offsets.bottom);
      line.attr("stroke",linecol);
      line.attr("opacity",0.5);
      var line = paper.path("M"+offsets.right+" "+offsets.bottom+"L"+footer.left+" "+footer.bottom);
      line.attr("stroke",linecol);
      line.attr("opacity",0.5);

      var line = paper.path("M"+strap.left+" "+strap.bottom+"L"+strap.right+" "+strap.top);
      line.attr("stroke",linecol);
      line.attr("opacity",0.5);

      var line = paper.path("M"+footer.left+" "+footer.bottom+"L"+offsets.right+" "+footer.bottom);
      line.attr("stroke",linecol);
      line.attr("opacity",0.5);

      var circle = paper.circle( strap.left, strap.bottom, rad*0.618 );
      circle.attr("fill", "#ccc");
      circle.attr("opacity",0.333);
      circle.attr("stroke", "#ccc");

      
      /*
      var centres = new Array();

      var numCircles = 10;

      // Loop through and draw stuff
      for (var i = 10; i >= 0; i--)
      {
      
        var rad = (Math.random()*100)+10;

        // Creates circle
        var circle = paper.circle( (Math.random()*paper.width)-rad, (Math.random()*paper.height)-rad, rad ); 
        
        // Sets the attributes of the circle
        circle.attr("fill", "#ccc");
        circle.attr("opacity",0.333);
        circle.attr("stroke", "#ccc");

        // Store centres in array
        centres[i] = new Array(circle.attr("cx"),circle.attr("cy"));     
      }

      // Drawlines
      for (var i = centres.length - 1; i >= 0; i--)
      {
        for (var j = centres.length - 1; j >= 0; j--)
        {
          ///console.log(centres[i]);
          if(i != j)
          {
            var line = paper.path("M"+centres[j][0]+" "+centres[j][1]+"L"+centres[i][0]+" "+centres[i][1]);
            line.attr("stroke","#b38f8f");
            line.attr("opacity",0.1);
          }        
        }
      }
      */

    }
    
    
    // Create listener function
    var updateLayout = _.debounce(function(e) {

      // Does all the layout updating here
      moveCircles();
  
    }, 50); // Maximum run of once per 500 milliseconds 

    // Add event listener
    window.addEventListener("resize", updateLayout, false);

    moveCircles();

    </script>
    
  </body>
</html>
